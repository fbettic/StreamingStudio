<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="text-danger">
        @if (error !== '') {
        <div>Error al registrarse</div>
        }
      </div>
      <form [formGroup]="subscriberFormGroup">
        <div class="mb-3">
          <label for="email" class="form-label">Email</label>
          <input
            formControlName="email"
            type="email"
            class="form-control"
            id="email"
            aria-describedby="email"
            placeholder="example@email.com"
          />
        </div>
        <div class="mb-3">
          <label for="firstname" class="form-label">Firstname</label>
          <input
            formControlName="firstname"
            type="text"
            class="form-control"
            id="firstname"
            placeholder="Firstname"
          />
        </div>
        <div class="mb-3">
          <label for="lastname" class="form-label">Lastname</label>
          <input
            formControlName="lastname"
            type="text"
            class="form-control"
            id="lastname"
            placeholder="Lastname"
          />
        </div>
        <div class="mb-3">
          <label for="phone" class="form-label">Phone</label>
          <input
            formControlName="phone"
            type="tel"
            class="form-control"
            id="phone"
            placeholder="Phone"
          />
        </div>
        <div class="mb-3">
          <label for="birth" class="form-label">Birth</label>
          <input
            formControlName="birth"
            type="date"
            class="form-control"
            id="birth"
          />
        </div>
        <div class="row md-3">
          <div formArrayName="marketingPreferences">
            @for (marketingPreference of marketingPreferences; track marketingPreference.targetId) {
            <div class="form-check">
              <input
                class="form-check-input"
                type="checkbox"
                [value]="marketingPreference.targetId"
                (change)="onCheckboxChange($event)"
                [id]="'targetCheck' + marketingPreference.targetId"
                
              />
              <label
                class="form-check-label"
                [for]="'targetCheck' + marketingPreference.targetId"
              >
                {{ marketingPreference.targetTitle }}
              </label>
            </div>
            }
          </div>
          <p>
            IDs seleccionados:
            {{ subscriberFormGroup.get("marketingPreferences")?.value }}
          </p>
        </div>
        <div class="d-grid gap-2">
          <button class="btn btn-primary btn-lg" (click)="setFormData()">
            Edit
          </button>
          <button
            type="submit"
            class="btn btn-primary btn-lg"
            (click)="submit()"
          >
            enviar
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
